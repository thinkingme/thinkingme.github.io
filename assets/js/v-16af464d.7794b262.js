"use strict";(self.webpackChunkcoding_road=self.webpackChunkcoding_road||[]).push([[3212],{21560:(e,n,i)=>{i.r(n),i.d(n,{data:()=>r});const r={key:"v-16af464d",path:"/coding-road/high-concurrency/nginx/nginx-tengine.html",title:"Nginx",lang:"zh-CN",frontmatter:{summary:"参考链接：nginx Nginx 一个主进程和多个工作进程，工作进程以非特权用户运行；; 支持的事件机制：kqueue（FreeBSD 4.1+）、epoll（Linux 2.6+）、rt signals（Linux 2.2.19+）、/dev/poll（Solaris 7 11/99+）、event ports（Solaris 10）、select以及po",head:[["meta",{property:"og:url",content:"https://vuepress-theme-hope-v2-demo.mrhope.site/coding-road/high-concurrency/nginx/nginx-tengine.html"}],["meta",{property:"og:site_name",content:"coding-rode"}],["meta",{property:"og:title",content:"Nginx"}],["meta",{property:"og:type",content:"article"}],["meta",{property:"og:updated_time",content:"2022-12-13T02:10:16.000Z"}],["meta",{property:"og:locale",content:"zh-CN"}],["meta",{property:"article:modified_time",content:"2022-12-13T02:10:16.000Z"}]]},excerpt:"",headers:[{level:2,title:"对比",slug:"对比",children:[{level:3,title:"Nginx和Apache的优缺点",slug:"nginx和apache的优缺点",children:[]}]}],git:{createdTime:1670897416e3,updatedTime:1670897416e3,contributors:[{name:"thinkingme",email:"linzhenhuigg@gmail.com",commits:1}]},readingTime:{minutes:1.92,words:577},filePathRelative:"coding-road/high-concurrency/nginx/nginx-tengine.md"}},27547:(e,n,i)=>{i.r(n),i.d(n,{default:()=>R});var r=i(95393);const t=(0,r.Uk)("参考链接："),a={href:"https://tengine.taobao.org/nginx_docs/cn/",target:"_blank",rel:"noopener noreferrer"},l=(0,r.Uk)("nginx"),o=(0,r._)("h1",{id:"nginx",tabindex:"-1"},[(0,r._)("a",{class:"header-anchor",href:"#nginx","aria-hidden":"true"},"#"),(0,r.Uk)(" Nginx")],-1),c=(0,r._)("li",null,"一个主进程和多个工作进程，工作进程以非特权用户运行；",-1),d={href:"https://tengine.taobao.org/nginx_docs/cn/docs/events.html",target:"_blank",rel:"noopener noreferrer"},p=(0,r.Uk)("支持"),g=(0,r.Uk)("的事件机制：kqueue（FreeBSD 4.1+）、epoll（Linux 2.6+）、rt signals（Linux 2.2.19+）、/dev/poll（Solaris 7 11/99+）、event ports（Solaris 10）、select以及poll；"),h=(0,r._)("li",null,"众多支持的kqueue特性包括EV_CLEAR、EV_DISABLE（临时禁止事件）、NOTE_LOWAT、EV_EOF，可用数据的数量，错误代码；",-1),s=(0,r._)("li",null,"支持sendfile（FreeBSD 3.1+, Linux 2.2+, Mac OS X 10.5+）、sendfile64（Linux 2.4.21+）和sendfilev（Solaris 8 7/01+）；（零拷贝技术，减少用户态内核态且黄和资源拷贝的技术）",-1),u={href:"https://tengine.taobao.org/nginx_docs/cn/docs/http/ngx_http_core_module.html#aio",target:"_blank",rel:"noopener noreferrer"},x=(0,r.Uk)("文件AIO"),_=(0,r.Uk)("（FreeBSD 4.3+, Linux 2.6.22+）；"),m=(0,r.uE)('<p>在 nginx 中，我们可以用如下配置，来根据文件的大小来使用不同的方式：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>location /video/ {\n    sendfile on; \n    aio on;     \n    directio 1024m; \n}\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>当文件大小大于 <code>directio</code> 值后，使用「异步 I/O + 直接 I/O」，否则使用「零拷贝技术」。</p>',3),k={href:"https://tengine.taobao.org/nginx_docs/cn/docs/http/ngx_http_core_module.html#directio",target:"_blank",rel:"noopener noreferrer"},f=(0,r.Uk)("DIRECTIO"),b=(0,r.Uk)(" (FreeBSD 4.4+, Linux 2.4+, Solaris 2.6+, Mac OS X);"),v={href:"https://tengine.taobao.org/nginx_docs/cn/docs/http/ngx_http_core_module.html#listen",target:"_blank",rel:"noopener noreferrer"},U=(0,r.Uk)("支持"),S=(0,r.Uk)("Accept-filters（FreeBSD 4.1+, NetBSD 5.0+）和 TCP_DEFER_ACCEPT（Linux 2.4+）；"),T=(0,r._)("li",null,"10000个非活跃的HTTP keep-alive连接仅占用约2.5M内存；",-1),y=(0,r._)("li",null,"尽可能避免数据拷贝操作。",-1),E=(0,r._)("h1",{id:"tengine",tabindex:"-1"},[(0,r._)("a",{class:"header-anchor",href:"#tengine","aria-hidden":"true"},"#"),(0,r.Uk)(" Tengine")],-1),N=(0,r.Uk)("Tengine是由淘宝网发起的Web服务器项目。它在"),L={href:"http://nginx.org/",target:"_blank",rel:"noopener noreferrer"},w=(0,r.Uk)("Nginx"),A=(0,r.Uk)("的基础上，针对大访问量网站的需求，添加了很多高级功能和特性。Tengine的性能和稳定性已经在大型的网站如"),D={href:"http://www.taobao.com/",target:"_blank",rel:"noopener noreferrer"},W=(0,r.Uk)("淘宝网"),O=(0,r.Uk)("，"),C={href:"http://www.tmall.com/",target:"_blank",rel:"noopener noreferrer"},I=(0,r.Uk)("天猫商城"),B=(0,r.Uk)("等得到了很好的检验。它的最终目标是打造一个高效、稳定、安全、易用的Web平台。"),F=(0,r.uE)('<p>Apache、httpd、IIS、nginx、tengine、openresty</p><h2 id="对比" tabindex="-1"><a class="header-anchor" href="#对比" aria-hidden="true">#</a> 对比</h2><h3 id="nginx和apache的优缺点" tabindex="-1"><a class="header-anchor" href="#nginx和apache的优缺点" aria-hidden="true">#</a> Nginx和Apache的优缺点</h3><h4 id="nginx相对apache的优点" tabindex="-1"><a class="header-anchor" href="#nginx相对apache的优点" aria-hidden="true">#</a> Nginx相对Apache的优点</h4><ul><li><p>轻量级，同样起web服务，nginx比apache消耗更少的内存以及资源</p></li><li><p>抗并发，nginx处理请求是异步非阻塞的</p></li><li><p>高度模块化设计，编写模块相对简单</p></li><li><p>社区活跃，生态好</p></li></ul><h4 id="apache相对nginx的优点" tabindex="-1"><a class="header-anchor" href="#apache相对nginx的优点" aria-hidden="true">#</a> Apache相对Nginx的优点</h4><ul><li><p>rewrite，比nginx的强大（用户搜索引擎收录，将url重写成搜索引擎喜欢的格式）</p></li><li><p>模块很多</p></li><li><p>稳定，bug少</p></li></ul><p>Nginx配置简洁</p><p>最重要的区别是：apache是同步多进程模型，一个进程对应一个连接，nginx是一个进程可以对应上万连接。</p>',9),P={},R=(0,i(13860).Z)(P,[["render",function(e,n){const i=(0,r.up)("ExternalLinkIcon");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r._)("p",null,[t,(0,r._)("a",a,[l,(0,r.Wm)(i)])]),o,(0,r._)("ul",null,[c,(0,r._)("li",null,[(0,r._)("a",d,[p,(0,r.Wm)(i)]),g]),h,s,(0,r._)("li",null,[(0,r._)("a",u,[x,(0,r.Wm)(i)]),_])]),m,(0,r._)("ul",null,[(0,r._)("li",null,[(0,r._)("a",k,[f,(0,r.Wm)(i)]),b]),(0,r._)("li",null,[(0,r._)("a",v,[U,(0,r.Wm)(i)]),S]),T,y]),E,(0,r._)("p",null,[N,(0,r._)("a",L,[w,(0,r.Wm)(i)]),A,(0,r._)("a",D,[W,(0,r.Wm)(i)]),O,(0,r._)("a",C,[I,(0,r.Wm)(i)]),B]),F])}]])},13860:(e,n)=>{n.Z=(e,n)=>{const i=e.__vccOpts||e;for(const[e,r]of n)i[e]=r;return i}}}]);