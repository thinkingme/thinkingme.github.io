"use strict";(self.webpackChunkcoding_road=self.webpackChunkcoding_road||[]).push([[5516],{53777:(n,s,a)=>{a.r(s),a.d(s,{data:()=>e});const e={key:"v-db25614c",path:"/coding-road/javaee/dev-tools/packaging-tool/gradle/aggregationModule.html",title:"Gradle 聚合模块配置",lang:"zh-CN",frontmatter:{summary:'Gradle 聚合模块配置 Yiyuery2021-06-11 13:49:10© 著作权 " 熟悉maven的同学肯定搭建过基于``标签配置的子父级依赖项目。今天，我来介绍下如何利用 gradle 构建一个子父级嵌套的项目，避免多个相似子级项目中出现重复模块依赖配置、重复代码。" " 做什么？" 解决 Gradle 根模块下配置所有子模块的依赖和版本配置;',head:[["meta",{property:"og:url",content:"https://vuepress-theme-hope-v2-demo.mrhope.site/coding-road/javaee/dev-tools/packaging-tool/gradle/aggregationModule.html"}],["meta",{property:"og:site_name",content:"coding-rode"}],["meta",{property:"og:title",content:"Gradle 聚合模块配置"}],["meta",{property:"og:type",content:"article"}],["meta",{property:"og:updated_time",content:"2022-11-04T02:33:31.000Z"}],["meta",{property:"og:locale",content:"zh-CN"}],["meta",{property:"article:modified_time",content:"2022-11-04T02:33:31.000Z"}]]},excerpt:"",headers:[{level:2,title:"准备工作",slug:"准备工作",children:[{level:3,title:"根目录配置",slug:"根目录配置",children:[]},{level:3,title:"容器模块和子模块配置",slug:"容器模块和子模块配置",children:[]},{level:3,title:"基础模块的使用",slug:"基础模块的使用",children:[]}]},{level:2,title:"REFRENCES",slug:"refrences",children:[]}],git:{createdTime:1667529211e3,updatedTime:1667529211e3,contributors:[{name:"thinkingme",email:"linzhenhuigg@gmail.com",commits:1}]},readingTime:{minutes:9.33,words:2800},filePathRelative:"coding-road/javaee/dev-tools/packaging-tool/gradle/aggregationModule.md"}},2635:(n,s,a)=>{a.r(s),a.d(s,{default:()=>j});var e=a(95393);const t=(0,e._)("h1",{id:"gradle-聚合模块配置",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#gradle-聚合模块配置","aria-hidden":"true"},"#"),(0,e.Uk)(" Gradle 聚合模块配置")],-1),o={href:"https://blog.51cto.com/u_15263565",target:"_blank",rel:"noopener noreferrer"},p=(0,e.Uk)("Yiyuery"),i=(0,e.Uk)("2021-06-11 13:49:10© 著作权"),c=(0,e.uE)('<blockquote><p>熟悉<code>maven</code>的同学肯定搭建过基于<code>&lt;parent&gt;</code>标签配置的子父级依赖项目。今天，我来介绍下如何利用 gradle 构建一个子父级嵌套的项目，避免多个相似子级项目中出现重复模块依赖配置、重复代码。</p></blockquote><blockquote><p>做什么？</p></blockquote><ul><li>解决 Gradle 根模块下配置所有子模块的依赖和版本配置</li><li>解决 Gradle 快速构建模块间互相依赖的问题</li><li>解决 Gradle 模块管理中的聚合模块的配置方式</li><li>解决 Gradle 配置项目多模块嵌套的项目配置</li><li>解决多模块之间依赖和功能分层处理方式</li><li>避免日常代码学习和项目搭建中重复造轮子的行为</li></ul><h2 id="准备工作" tabindex="-1"><a class="header-anchor" href="#准备工作" aria-hidden="true">#</a> 准备工作</h2><blockquote><p>先看下后期搭建完后实现的项目树结构</p></blockquote><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code>&gt; Task :spring-security-sso:spring-security-resources:printTree\n+--- ishare-project\n|   -- common-dependencies\n|   +---- common-dependency\n|   \\---- common-template\n|   -- spring-security-sso\n|   +---- spring-security-auth\n|   \\---- spring-security-resources\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>编写了一个脚本程序，把项目的结构树打印了出来。其中，</p><ul><li><code>ishare-project</code>为整个工程的根目录；</li><li><code>common-dependencies</code>为整个工程的基础依赖模块</li><li><code>common-dependency</code>、<code>common-template</code>为基础大模块下的多个个基础模块，该基础模块的一些公共配置可以放在<code>common-dependencies</code>进行配置</li><li><code>spring-security-sso</code>为开发的应用模块，此处可以看成是一个大的模块，该模块下面可以细分更多的小模块</li><li><code>spring-security-auth</code>、<code>spring-security-resources</code>为第三层级的模块，主要通过依赖<code>spring-security-sso</code>的依赖配置来完成依赖配置的简化</li></ul><h3 id="根目录配置" tabindex="-1"><a class="header-anchor" href="#根目录配置" aria-hidden="true">#</a> 根目录配置</h3><blockquote><p>开始搭建根目录模块</p></blockquote><ul><li><code>build.gradle</code> 全局项目插件和依赖管理</li></ul><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token function">configure</span><span class="token punctuation">(</span>allprojects<span class="token punctuation">)</span> <span class="token punctuation">{</span> project <span class="token operator">-&gt;</span>\n    group <span class="token operator">=</span> &#39;com<span class="token punctuation">.</span>example&#39;\n    version <span class="token operator">=</span> &#39;<span class="token number">0.0</span><span class="token number">.1</span><span class="token operator">-</span>SNAPSHOT&#39;\n\n    apply from<span class="token operator">:</span> <span class="token string">&quot;${rootDir}/dependency.gradle&quot;</span>\n\n    apply plugin<span class="token operator">:</span> <span class="token char">&#39;maven&#39;</span>\n\n    ext<span class="token punctuation">.</span>gradleScriptDir <span class="token operator">=</span> <span class="token string">&quot;${rootProject.projectDir}/gradle&quot;</span>\n\n    apply from<span class="token operator">:</span> <span class="token string">&quot;${gradleScriptDir}/task.gradle&quot;</span>\n<span class="token punctuation">}</span>\n\ndef holderProjects <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span>&#39;spring<span class="token operator">-</span>security<span class="token operator">-</span>sso<span class="token char">&#39;, &#39;</span>common<span class="token operator">-</span>dependencies&#39;<span class="token punctuation">)</span>\n\n<span class="token function">configure</span><span class="token punctuation">(</span>subprojects<span class="token punctuation">)</span> <span class="token punctuation">{</span> subproject <span class="token operator">-&gt;</span>\n    <span class="token comment">//此处主要为了过滤容器模块中的插件配置，容器模块的主要用来管理下属部分的模块，无需添加依赖和插件</span>\n    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>holderProjects<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>subproject<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        apply plugin<span class="token operator">:</span> <span class="token char">&#39;java&#39;</span>\n\n        sourceCompatibility <span class="token operator">=</span> <span class="token number">1.8</span>\n        targetCompatibility <span class="token operator">=</span> <span class="token number">1.8</span>\n\n        <span class="token punctuation">[</span>compileJava<span class="token punctuation">,</span> compileTestJava<span class="token punctuation">,</span> javadoc<span class="token punctuation">]</span><span class="token operator">*</span><span class="token punctuation">.</span>options<span class="token operator">*</span><span class="token punctuation">.</span>encoding <span class="token operator">=</span> <span class="token char">&#39;UTF-8&#39;</span>\n\n        apply from<span class="token operator">:</span> <span class="token string">&quot;${rootDir}/dependency.gradle&quot;</span>\n\n        repositories <span class="token punctuation">{</span>\n            maven <span class="token punctuation">{</span> url <span class="token operator">=</span> &#39;https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>maven<span class="token punctuation">.</span>aliyun<span class="token punctuation">.</span>com<span class="token operator">/</span>repository<span class="token operator">/</span>jcenter&#39; <span class="token punctuation">}</span>\n            maven <span class="token punctuation">{</span> url <span class="token operator">=</span> &#39;https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>oss<span class="token punctuation">.</span>sonatype<span class="token punctuation">.</span>org<span class="token operator">/</span>content<span class="token operator">/</span>repositories<span class="token operator">/</span>snapshots<span class="token operator">/</span>&#39; <span class="token punctuation">}</span>\n            maven <span class="token punctuation">{</span> url <span class="token operator">=</span> <span class="token string">&quot;https://plugins.gradle.org/m2/&quot;</span> <span class="token punctuation">}</span>\n            <span class="token function">jcenter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n        <span class="token punctuation">}</span>\n\n        dependencies <span class="token punctuation">{</span>\n            implementation libs<span class="token punctuation">[</span>&#39;commons<span class="token operator">-</span>lang3&#39;<span class="token punctuation">]</span>\n            <span class="token comment">//lombok</span>\n            annotationProcessor libs<span class="token punctuation">[</span><span class="token char">&#39;lombok&#39;</span><span class="token punctuation">]</span>\n            compileOnly libs<span class="token punctuation">[</span><span class="token char">&#39;lombok&#39;</span><span class="token punctuation">]</span>\n            testAnnotationProcessor libs<span class="token punctuation">[</span><span class="token char">&#39;lombok&#39;</span><span class="token punctuation">]</span>\n            testCompileOnly libs<span class="token punctuation">[</span><span class="token char">&#39;lombok&#39;</span><span class="token punctuation">]</span>\n\n            testImplementation libs<span class="token punctuation">[</span><span class="token char">&#39;junit&#39;</span><span class="token punctuation">]</span>\n        <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>此处主要为了过滤容器模块中的插件配置，容器模块的主要用来管理下属部分的模块，无需添加依赖和插件 <code>spring-security-sso</code>、<code>common-dependencies</code>都是容器模块</p><ul><li><code>dependency.gradle</code> 全局依赖和设计版本的常量定义</li></ul><ol><li>可以使用ext定义版本如下</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// when add a new dependency, gradle not download that package</span>\n<span class="token comment">// just when module build.gradle use this dependency, then download and build project</span>\next <span class="token punctuation">{</span>\n    ver <span class="token operator">=</span> <span class="token punctuation">[</span>\n            utils  <span class="token operator">:</span> <span class="token punctuation">[</span>\n                    guava               <span class="token operator">:</span> <span class="token string">&quot;26.0-jre&quot;</span><span class="token punctuation">,</span>\n                    lombok              <span class="token operator">:</span> <span class="token string">&quot;1.18.2&quot;</span><span class="token punctuation">,</span>\n                    common_lang3        <span class="token operator">:</span> <span class="token string">&quot;3.8&quot;</span><span class="token punctuation">,</span>\n                    commons_io          <span class="token operator">:</span> <span class="token string">&quot;2.4&quot;</span><span class="token punctuation">,</span>\n                    commons_collections4<span class="token operator">:</span> <span class="token string">&quot;4.2&quot;</span><span class="token punctuation">,</span>\n                    fastjson            <span class="token operator">:</span> <span class="token string">&quot;1.2.47&quot;</span><span class="token punctuation">,</span>\n                    junit               <span class="token operator">:</span> <span class="token string">&quot;4.12&quot;</span><span class="token punctuation">,</span>\n                    joda_time           <span class="token operator">:</span> <span class="token string">&quot;2.10&quot;</span><span class="token punctuation">,</span>\n                    groovy_all          <span class="token operator">:</span> <span class="token string">&quot;2.4.13&quot;</span>\n\n            <span class="token punctuation">]</span><span class="token punctuation">,</span>\n            swagger<span class="token operator">:</span> <span class="token punctuation">[</span>\n                    swagger2markup     <span class="token operator">:</span> <span class="token string">&quot;1.3.3&quot;</span><span class="token punctuation">,</span>\n                    swagger_annotations<span class="token operator">:</span> <span class="token string">&quot;1.5.22&quot;</span>\n            <span class="token punctuation">]</span><span class="token punctuation">,</span>\n            spring <span class="token operator">:</span> <span class="token punctuation">[</span>\n                    boot               <span class="token operator">:</span> <span class="token string">&quot;2.1.0.RELEASE&quot;</span><span class="token punctuation">,</span>\n                    spring_version     <span class="token operator">:</span> <span class="token string">&quot;5.1.2.RELEASE&quot;</span><span class="token punctuation">,</span>\n                    spring_jdbc_version<span class="token operator">:</span> <span class="token string">&quot;4.3.18.RELEASE&quot;</span>\n            <span class="token punctuation">]</span><span class="token punctuation">,</span>\n            cloud  <span class="token operator">:</span> <span class="token punctuation">[</span>\n                    spring_cloud_start_alibaba_nacos_config<span class="token operator">:</span> <span class="token string">&quot;0.2.1.RELEASE&quot;</span>\n            <span class="token punctuation">]</span><span class="token punctuation">,</span>\n            nacos  <span class="token operator">:</span> <span class="token punctuation">[</span>\n                    nacos_config_spring_boot_starter<span class="token operator">:</span> <span class="token string">&quot;0.2.1&quot;</span>\n            <span class="token punctuation">]</span><span class="token punctuation">,</span>\n            common <span class="token operator">:</span> <span class="token punctuation">[</span>\n                    <span class="token comment">//数据库</span>\n                    postgresql                 <span class="token operator">:</span> <span class="token string">&quot;42.2.5&quot;</span><span class="token punctuation">,</span>\n                    mysql                      <span class="token operator">:</span> <span class="token char">&#39;8.0.13&#39;</span><span class="token punctuation">,</span>\n                    durid                      <span class="token operator">:</span> <span class="token char">&#39;1.1.14&#39;</span><span class="token punctuation">,</span>\n\n                    mybatis_plus_boot_starter  <span class="token operator">:</span> <span class="token string">&quot;3.0.6&quot;</span><span class="token punctuation">,</span>\n                    mybatis                    <span class="token operator">:</span> <span class="token string">&quot;3.4.6&quot;</span><span class="token punctuation">,</span>\n                    mybatis_generator          <span class="token operator">:</span> <span class="token string">&quot;1.3.7&quot;</span><span class="token punctuation">,</span>\n                    mapper                     <span class="token operator">:</span> <span class="token string">&quot;4.1.2&quot;</span><span class="token punctuation">,</span>\n                    mybatis_spring_boot_starter<span class="token operator">:</span> <span class="token string">&quot;1.3.2&quot;</span><span class="token punctuation">,</span>\n\n                    velocity_engine_core       <span class="token operator">:</span> <span class="token string">&quot;2.0&quot;</span><span class="token punctuation">,</span>\n                    freemarker                 <span class="token operator">:</span> <span class="token string">&quot;2.3.28&quot;</span><span class="token punctuation">,</span>\n\n                    pagehelper                 <span class="token operator">:</span> <span class="token string">&quot;5.1.8&quot;</span><span class="token punctuation">,</span>\n\n                    <span class="token comment">//日志</span>\n                    slf4j_version              <span class="token operator">:</span> <span class="token string">&quot;1.7.25&quot;</span><span class="token punctuation">,</span>\n                    logback_version            <span class="token operator">:</span> <span class="token string">&quot;1.2.3&quot;</span>\n            <span class="token punctuation">]</span>\n    <span class="token punctuation">]</span>\n    libs <span class="token operator">=</span> <span class="token punctuation">[</span>\n            <span class="token comment">//UTILS</span>\n            <span class="token string">&quot;lombok&quot;</span>                                   <span class="token operator">:</span> <span class="token string">&quot;org.projectlombok:lombok:$ver.utils.lombok&quot;</span><span class="token punctuation">,</span>\n            <span class="token string">&quot;commons-lang3&quot;</span>                            <span class="token operator">:</span> <span class="token string">&quot;org.apache.commons:commons-lang3:$ver.utils.common_lang3&quot;</span><span class="token punctuation">,</span>\n            <span class="token string">&quot;commons-io&quot;</span>                               <span class="token operator">:</span> <span class="token string">&quot;commons-io:commons-io:$ver.utils.commons_io&quot;</span><span class="token punctuation">,</span>\n            <span class="token string">&quot;commons-collections4&quot;</span>                     <span class="token operator">:</span> <span class="token string">&quot;org.apache.commons:commons-collections4:$ver.utils.commons_collections4&quot;</span><span class="token punctuation">,</span>\n            <span class="token string">&quot;guava&quot;</span>                                    <span class="token operator">:</span> <span class="token string">&quot;com.google.guava:guava:$ver.utils.guava&quot;</span><span class="token punctuation">,</span>\n            <span class="token string">&quot;fastjson&quot;</span>                                 <span class="token operator">:</span> <span class="token string">&quot;com.alibaba:fastjson:$ver.utils.fastjson&quot;</span><span class="token punctuation">,</span>\n            <span class="token string">&quot;joda-time&quot;</span>                                <span class="token operator">:</span> <span class="token string">&quot;joda-time:joda-time:$ver.utils.joda_time&quot;</span><span class="token punctuation">,</span>\n            <span class="token string">&quot;groovy-all&quot;</span>                               <span class="token operator">:</span> <span class="token string">&quot;org.codehaus.groovy:groovy-all:$ver.utils.groovy_all&quot;</span><span class="token punctuation">,</span>\n\n            <span class="token comment">//TEST</span>\n            <span class="token string">&quot;junit&quot;</span>                                    <span class="token operator">:</span> <span class="token string">&quot;junit:junit:$ver.utils.junit&quot;</span><span class="token punctuation">,</span>\n\n            <span class="token comment">//SPRING-BOOT</span>\n            <span class="token string">&quot;spring-boot-gradle-plugin&quot;</span>                <span class="token operator">:</span> <span class="token string">&quot;org.springframework.boot:spring-boot-gradle-plugin:$ver.spring.boot&quot;</span><span class="token punctuation">,</span>\n            <span class="token string">&quot;jdbc&quot;</span>                                     <span class="token operator">:</span> <span class="token string">&quot;org.springframework.boot:spring-boot-starter-jdbc:$ver.spring.boot&quot;</span><span class="token punctuation">,</span>\n            <span class="token string">&quot;spring-security-oauth2&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;org.springframework.security.oauth:spring-security-oauth2:$ver.spring.boot&quot;</span><span class="token punctuation">,</span>\n\n            <span class="token comment">//SPRING</span>\n            <span class="token string">&quot;spring-context&quot;</span>                           <span class="token operator">:</span> <span class="token string">&quot;org.springframework:spring-context:$ver.spring.spring_version&quot;</span><span class="token punctuation">,</span>\n            <span class="token string">&quot;spring-web&quot;</span>                               <span class="token operator">:</span> <span class="token string">&quot;org.springframework:spring-web:$ver.spring.spring_version&quot;</span><span class="token punctuation">,</span>\n            <span class="token string">&quot;spring-jdbc&quot;</span>                              <span class="token operator">:</span> <span class="token string">&quot;org.springframework:spring-jdbc:$ver.spring.spring_jdbc_version&quot;</span><span class="token punctuation">,</span>\n\n            <span class="token comment">//DB</span>\n            <span class="token string">&quot;postgresql&quot;</span>                               <span class="token operator">:</span> <span class="token string">&quot;org.postgresql:postgresql:$ver.common.postgresql&quot;</span><span class="token punctuation">,</span>\n            <span class="token string">&quot;mysql-connector-java&quot;</span>                     <span class="token operator">:</span> <span class="token string">&quot;mysql:mysql-connector-java:$ver.common.mysql&quot;</span><span class="token punctuation">,</span>\n            <span class="token string">&quot;druid&quot;</span>                                    <span class="token operator">:</span> <span class="token string">&quot;com.alibaba:druid:$ver.common.druid&quot;</span><span class="token punctuation">,</span>\n\n            <span class="token comment">// MYBATIS 核心库</span>\n            <span class="token string">&quot;mybatis-plus-boot-starter&quot;</span>                <span class="token operator">:</span> <span class="token string">&quot;com.baomidou:mybatis-plus-boot-starter:$ver.common.mybatis_plus_boot_starter&quot;</span><span class="token punctuation">,</span>\n            <span class="token string">&quot;mybatis-plus&quot;</span>                             <span class="token operator">:</span> <span class="token string">&quot;com.baomidou:mybatis-plus:$ver.common.mybatis_plus&quot;</span><span class="token punctuation">,</span>\n            <span class="token string">&quot;mybatis-plus-generator&quot;</span>                   <span class="token operator">:</span> <span class="token string">&quot;com.baomidou:mybatis-plus-generator:$ver.common.mybatis_plus&quot;</span><span class="token punctuation">,</span>\n            <span class="token string">&quot;mybatis&quot;</span>                                  <span class="token operator">:</span> <span class="token string">&quot;org.mybatis:mybatis:$ver.common.mybatis&quot;</span><span class="token punctuation">,</span>\n            <span class="token string">&quot;mybatis-generator-core&quot;</span>                   <span class="token operator">:</span> <span class="token string">&quot;org.mybatis.generator:mybatis-generator-core:$ver.common.mybatis_generator&quot;</span><span class="token punctuation">,</span>\n            <span class="token string">&quot;mapper&quot;</span>                                   <span class="token operator">:</span> <span class="token string">&quot;tk.mybatis:mapper:$ver.common.mapper&quot;</span><span class="token punctuation">,</span>\n            <span class="token string">&quot;mybatis-spring-boot-starter&quot;</span>              <span class="token operator">:</span> <span class="token string">&quot;org.mybatis.spring.boot:mybatis-spring-boot-starter:$ver.common.mybatis_spring_boot_starter&quot;</span><span class="token punctuation">,</span>\n\n            <span class="token comment">//模板引擎，需要指定 mpg.setTemplateEngine(new FreemarkerTemplateEngine());</span>\n            <span class="token string">&quot;freemarker&quot;</span>                               <span class="token operator">:</span> <span class="token string">&quot;org.freemarker:freemarker:$ver.common.freemarker&quot;</span><span class="token punctuation">,</span>\n            <span class="token string">&quot;velocity-engine-core&quot;</span>                     <span class="token operator">:</span> <span class="token string">&quot;org.apache.velocity:velocity-engine-core:$ver.common.velocity_engine_core&quot;</span><span class="token punctuation">,</span>\n\n            <span class="token string">&quot;pagehelper&quot;</span>                               <span class="token operator">:</span> <span class="token string">&quot;com.github.pagehelper:pagehelper:$ver.common.pagehelper&quot;</span><span class="token punctuation">,</span>\n\n            <span class="token comment">//LOG</span>\n            <span class="token string">&quot;slf4j-api&quot;</span>                                <span class="token operator">:</span> <span class="token string">&quot;org.slf4j:slf4j-api:$ver.common.slf4j_version&quot;</span><span class="token punctuation">,</span>\n            <span class="token string">&quot;log4j-over-slf4j&quot;</span>                         <span class="token operator">:</span> <span class="token string">&quot;org.slf4j:log4j-over-slf4j:$ver.common.slf4j_version&quot;</span><span class="token punctuation">,</span>\n            <span class="token string">&quot;jcl-over-slf4j&quot;</span>                           <span class="token operator">:</span> <span class="token string">&quot;org.slf4j:jcl-over-slf4j:$ver.common.slf4j_version&quot;</span><span class="token punctuation">,</span>\n            <span class="token string">&quot;jul-to-slf4j&quot;</span>                             <span class="token operator">:</span> <span class="token string">&quot;org.slf4j:jul-to-slf4j:$ver.common.slf4j_version&quot;</span><span class="token punctuation">,</span>\n            <span class="token string">&quot;logback-classic&quot;</span>                          <span class="token operator">:</span> <span class="token string">&quot;ch.qos.logback:logback-classic:$ver.common.logback_version&quot;</span><span class="token punctuation">,</span>\n            <span class="token string">&quot;logback-core&quot;</span>                             <span class="token operator">:</span> <span class="token string">&quot;ch.qos.logback:logback-core:$ver.common.logback_version&quot;</span><span class="token punctuation">,</span>\n\n            <span class="token comment">//SWAGGER</span>\n            <span class="token string">&quot;swagger2markup&quot;</span>                           <span class="token operator">:</span> <span class="token string">&quot;io.github.swagger2markup:swagger2markup:$ver.swagger.swagger2markup&quot;</span><span class="token punctuation">,</span>\n\n            <span class="token comment">//热部署</span>\n            <span class="token string">&quot;spring-boot-devtools&quot;</span>                     <span class="token operator">:</span> <span class="token string">&quot;org.springframework.boot:spring-boot-devtools:$ver.spring.boot&quot;</span><span class="token punctuation">,</span>\n\n            <span class="token comment">//Spring Cloud</span>\n            <span class="token string">&quot;spring-cloud-starter-alibaba-nacos-config&quot;</span><span class="token operator">:</span> <span class="token string">&quot;org.springframework.cloud:spring-cloud-starter-alibaba-nacos-config:$ver.cloud.spring_cloud_start_alibaba_nacos_config&quot;</span><span class="token punctuation">,</span>\n\n            <span class="token comment">//Nacos</span>\n            <span class="token string">&quot;nacos-config-spring-boot-starter&quot;</span>         <span class="token operator">:</span> <span class="token string">&quot;com.alibaba.boot:nacos-config-spring-boot-starter:$ver.nacos.nacos_config_spring_boot_starter&quot;</span><span class="token punctuation">,</span>\n            <span class="token string">&quot;nacos-config-spring-boot-actuator&quot;</span>        <span class="token operator">:</span> <span class="token string">&quot;com.alibaba.boot:nacos-config-spring-boot-actuator:$ver.nacos.nacos_config_spring_boot_starter&quot;</span><span class="token punctuation">,</span>\n\n            <span class="token comment">//Swagger</span>\n            <span class="token string">&quot;swagger-annotations&quot;</span>                      <span class="token operator">:</span> <span class="token string">&quot;io.swagger:swagger-annotations:$ver.swagger.swagger_annotations&quot;</span>\n\n    <span class="token punctuation">]</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>也可以在对应目录底下创建gradle.properties文件</li></ol><p><img src="assert/aggregationModule/image-20220609173720560.png" alt="image-20220609173720560" loading="lazy"></p><ol start="3"><li>使用java-platform</li></ol><p>首先创建一个空项目，只有build.gradle文件，内容如下</p><div class="language-groovy ext-groovy line-numbers-mode"><pre class="language-groovy"><code>plugins <span class="token punctuation">{</span>\n    id <span class="token string">&#39;java-platform&#39;</span>\n<span class="token punctuation">}</span>\n\nversion <span class="token string">&#39;1.0&#39;</span>\nrepositories <span class="token punctuation">{</span>\n    <span class="token function">mavenCentral</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n<span class="token punctuation">}</span>\njavaPlatform <span class="token punctuation">{</span>\n    <span class="token function">allowDependencies</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n<span class="token punctuation">}</span>\ndependencies <span class="token punctuation">{</span>\n    api <span class="token function">platform</span><span class="token punctuation">(</span><span class="token string">&#39;org.springframework.boot:spring-boot-dependencies:2.3.4.RELEASE&#39;</span><span class="token punctuation">)</span>\n    api <span class="token function">platform</span><span class="token punctuation">(</span><span class="token string">&#39;org.springframework.cloud:spring-cloud-dependencies:Hoxton.SR6&#39;</span><span class="token punctuation">)</span>\n    api <span class="token function">platform</span><span class="token punctuation">(</span><span class="token string">&#39;org.springframework.cloud:spring-cloud-contract-dependencies:2.2.3.RELEASE&#39;</span><span class="token punctuation">)</span>\n    api <span class="token function">platform</span><span class="token punctuation">(</span><span class="token string">&#39;org.junit:junit-bom:5.3.2&#39;</span><span class="token punctuation">)</span>\n    constraints <span class="token punctuation">{</span>\n        api <span class="token string">&#39;com.google.guava:guava:27.0.1-jre&#39;</span>\n\n        api <span class="token string">&#39;ch.vorburger.mariaDB4j:mariaDB4j-springboot:2.4.0&#39;</span>\n        api <span class="token string">&#39;org.mariadb.jdbc:mariadb-java-client:2.2.5&#39;</span>\n\n        api <span class="token string">&#39;org.mockito:mockito-core:2.22.0&#39;</span>\n        api <span class="token string">&#39;org.mockito:mockito-junit-jupiter:2.22.0&#39;</span>\n        api <span class="token string">&#39;org.assertj:assertj-core:3.11.1&#39;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>然后再其他项目中导入</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>dependencies <span class="token punctuation">{</span>\n    implementation platform<span class="token punctuation">(</span><span class="token string">&#39;该模块&#39;</span><span class="token punctuation">)</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>根目录模块配置<code>settings.gradle</code>,此文件只需要存在在根目录中，其余子模块不需要此配置文件</li></ul><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span><span class="token class-name">JavaVersion</span><span class="token punctuation">.</span><span class="token function">current</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>java8Compatible <span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">GradleException</span><span class="token punctuation">(</span> <span class="token string">&quot;Gradle must be run with Java 8&quot;</span> <span class="token punctuation">)</span>\n<span class="token punctuation">}</span>\n\ninclude &#39;<span class="token operator">:</span>common<span class="token operator">-</span>dependencies<span class="token operator">:</span>common<span class="token operator">-</span>dependency&#39;\ninclude &#39;<span class="token operator">:</span>common<span class="token operator">-</span>dependencies<span class="token operator">:</span>common<span class="token operator">-</span>template&#39;\n\ninclude &#39;<span class="token operator">:</span>spring<span class="token operator">-</span>security<span class="token operator">-</span>sso<span class="token operator">:</span>spring<span class="token operator">-</span>security<span class="token operator">-</span>auth&#39;\ninclude &#39;<span class="token operator">:</span>spring<span class="token operator">-</span>security<span class="token operator">-</span>sso<span class="token operator">:</span>spring<span class="token operator">-</span>security<span class="token operator">-</span>resources&#39;\n\n<span class="token doc-comment comment">/**\n * 递归检查build.gradle文件是否根据模块名生成\n * <span class="token keyword">@param</span> <span class="token parameter">dirs</span>\n * <span class="token keyword">@return</span>\n */</span>\ndef <span class="token function">assertProjectBuildFile</span><span class="token punctuation">(</span><span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ProjectDescriptor</span><span class="token punctuation">&gt;</span></span> dirs<span class="token punctuation">)</span><span class="token punctuation">{</span>\n    <span class="token keyword">if</span><span class="token punctuation">(</span>dirs<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>\n        dirs<span class="token punctuation">.</span>each <span class="token punctuation">{</span> project <span class="token operator">-&gt;</span>\n            project<span class="token punctuation">.</span>buildFileName <span class="token operator">=</span> <span class="token string">&quot;${project.name}.gradle&quot;</span>\n            <span class="token keyword">assert</span> project<span class="token punctuation">.</span>projectDir<span class="token punctuation">.</span><span class="token function">isDirectory</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n            <span class="token keyword">assert</span> project<span class="token punctuation">.</span>buildFile<span class="token punctuation">.</span><span class="token function">exists</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n            <span class="token keyword">assert</span> project<span class="token punctuation">.</span>buildFile<span class="token punctuation">.</span><span class="token function">isFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n        <span class="token punctuation">}</span>\n        <span class="token keyword">if</span><span class="token punctuation">(</span>dirs<span class="token punctuation">.</span>children<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>\n            dirs<span class="token punctuation">.</span>children<span class="token punctuation">.</span>each <span class="token punctuation">{</span>project<span class="token operator">-&gt;</span>\n                <span class="token function">assertProjectBuildFile</span><span class="token punctuation">(</span>project<span class="token punctuation">)</span>\n            <span class="token punctuation">}</span>\n        <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token function">assertProjectBuildFile</span><span class="token punctuation">(</span>rootProject<span class="token punctuation">.</span>children<span class="token punctuation">)</span>\n\n\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>配置文件中的<code>assertProjectBuildFile</code>函数主要为了检查模块下是否含有对应模块名的 gradle 配置文件， 在编译的时候可以选择指定编译模块，以每个子模块为最小配置单元，注释掉对应模块的 include…即可,例如</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code>//include &#39;:common-dependencies:common-template&#39; 1.\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>这样，可以加速主要模块的构建和编译速度</p><h3 id="容器模块和子模块配置" tabindex="-1"><a class="header-anchor" href="#容器模块和子模块配置" aria-hidden="true">#</a> 容器模块和子模块配置</h3><blockquote><p>配置全局基础依赖模块单元<code>common-dependency</code></p></blockquote><ul><li><code>common-dependency.gradle</code></li></ul><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>dependencies <span class="token punctuation">{</span>\n    <span class="token doc-comment comment">/** 开源的Java工具库*/</span>\n    compile libs<span class="token punctuation">[</span><span class="token string">&quot;guava&quot;</span><span class="token punctuation">]</span>\n    compile libs<span class="token punctuation">[</span><span class="token string">&quot;commons-lang3&quot;</span><span class="token punctuation">]</span>\n    compile libs<span class="token punctuation">[</span><span class="token string">&quot;commons-collections4&quot;</span><span class="token punctuation">]</span>\n    compile libs<span class="token punctuation">[</span><span class="token string">&quot;fastjson&quot;</span><span class="token punctuation">]</span>\n    compile libs<span class="token punctuation">[</span><span class="token string">&quot;joda-time&quot;</span><span class="token punctuation">]</span>\n    compile libs<span class="token punctuation">[</span><span class="token string">&quot;guava&quot;</span><span class="token punctuation">]</span>\n    compile libs<span class="token punctuation">[</span><span class="token string">&quot;commons-io&quot;</span><span class="token punctuation">]</span>\n\n    <span class="token comment">/*分页和mapper插件*/</span>\n    compile libs<span class="token punctuation">[</span><span class="token string">&quot;pagehelper&quot;</span><span class="token punctuation">]</span>\n    compile libs<span class="token punctuation">[</span><span class="token string">&quot;mapper&quot;</span><span class="token punctuation">]</span>\n\n    <span class="token comment">//mybatis核心库</span>\n    compile libs<span class="token punctuation">[</span><span class="token string">&quot;mybatis&quot;</span><span class="token punctuation">]</span>\n\n    <span class="token doc-comment comment">/**数据库驱动*/</span>\n    compile libs<span class="token punctuation">[</span><span class="token string">&quot;postgresql&quot;</span><span class="token punctuation">]</span>\n    compile libs<span class="token punctuation">[</span><span class="token string">&quot;mysql-connector-java&quot;</span><span class="token punctuation">]</span>\n\n    compile libs<span class="token punctuation">[</span><span class="token string">&quot;spring-context&quot;</span><span class="token punctuation">]</span>\n    compile libs<span class="token punctuation">[</span><span class="token string">&quot;spring-web&quot;</span><span class="token punctuation">]</span>\n    compile libs<span class="token punctuation">[</span><span class="token string">&quot;spring-jdbc&quot;</span><span class="token punctuation">]</span>\n\n    compile libs<span class="token punctuation">[</span><span class="token string">&quot;slf4j-api&quot;</span><span class="token punctuation">]</span>\n    compile libs<span class="token punctuation">[</span><span class="token string">&quot;log4j-over-slf4j&quot;</span><span class="token punctuation">]</span>\n    compile libs<span class="token punctuation">[</span><span class="token string">&quot;jcl-over-slf4j&quot;</span><span class="token punctuation">]</span>\n    compile libs<span class="token punctuation">[</span><span class="token string">&quot;jul-to-slf4j&quot;</span><span class="token punctuation">]</span>\n    compile libs<span class="token punctuation">[</span><span class="token string">&quot;logback-classic&quot;</span><span class="token punctuation">]</span>\n    compile libs<span class="token punctuation">[</span><span class="token string">&quot;logback-core&quot;</span><span class="token punctuation">]</span>\n\n    compile group<span class="token operator">:</span> &#39;io<span class="token punctuation">.</span>swagger&#39;<span class="token punctuation">,</span> name<span class="token operator">:</span> &#39;swagger<span class="token operator">-</span>annotations&#39;<span class="token punctuation">,</span> version<span class="token operator">:</span> <span class="token char">&#39;1.5.22&#39;</span>\n    compile group<span class="token operator">:</span> &#39;com<span class="token punctuation">.</span>alibaba&#39;<span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token char">&#39;druid&#39;</span><span class="token punctuation">,</span> version<span class="token operator">:</span> <span class="token char">&#39;1.1.14&#39;</span>\n\n    testCompile libs<span class="token punctuation">[</span><span class="token string">&quot;junit&quot;</span><span class="token punctuation">]</span>\n<span class="token punctuation">}</span>\n\n\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://s5.51cto.com/images/blog/202106/09/d46acf21e10c6d81fd5ef52461278fe4.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_30,g_se,x_10,y_10,shadow_20,type_ZmFuZ3poZW5naGVpdGk=" alt="[Gradle] Gradle 聚合模块配置_聚合模块" loading="lazy"></p><ul><li><code>common-template.gradle</code></li></ul><p>容器模块下子模块间互相依赖配置方式如下</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code>dependencies { compile project(&#39;:common-dependencies:common-dependency&#39;) }\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>一般我们在开发项目的时候为了测试往往会写个<code>Hello World</code>的请求测试地址或页面，在<code>common-template</code>子模块中我便定义了这样的一个接口，一些注解或是类的依赖通过引入<code>common-dependency</code>基础依赖来实现</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/*\n * @ProjectName: 编程学习\n * @Copyright:   2019 HangZhou xiazhaoyang Dev, Ltd. All Right Reserved.\n * @address:     http://xiazhaoyang.tech\n * @date:        2019/3/26 06:59\n * @email:       xiazhaoyang@live.com\n * @description: 本内容仅限于编程技术学习使用，转发请注明出处.\n */</span>\n<span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>template</span><span class="token punctuation">;</span>\n\n<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">GetMapping</span></span><span class="token punctuation">;</span>\n<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RequestMapping</span></span><span class="token punctuation">;</span>\n<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RestController</span></span><span class="token punctuation">;</span>\n\n<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>text<span class="token punctuation">.</span></span><span class="token class-name">SimpleDateFormat</span></span><span class="token punctuation">;</span>\n<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Date</span></span><span class="token punctuation">;</span>\n\n<span class="token doc-comment comment">/**\n * <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>\n *\n * <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>\n *\n * <span class="token keyword">@author</span> xiazhaoyang\n * <span class="token keyword">@version</span> v1.0.0\n * <span class="token keyword">@date</span> 2019/3/26 06:59\n * <span class="token keyword">@modificationHistory</span>=========================逻辑或功能性重大变更记录\n * <span class="token keyword">@modify</span> By: <span class="token punctuation">{</span>修改人<span class="token punctuation">}</span> 2019/3/26\n * <span class="token keyword">@modify</span> reason: <span class="token punctuation">{</span>方法名<span class="token punctuation">}</span>:<span class="token punctuation">{</span>原因<span class="token punctuation">}</span>\n * ...\n */</span>\n<span class="token annotation punctuation">@RestController</span>\n<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/template&quot;</span><span class="token punctuation">)</span>\n<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloController</span> <span class="token punctuation">{</span>\n\n    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/hello&quot;</span><span class="token punctuation">)</span>\n    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>\n        <span class="token keyword">return</span> <span class="token string">&quot;common-template request to `/template/hello`:&quot;</span> <span class="token operator">+</span>\n                <span class="token keyword">new</span> <span class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span><span class="token string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot;\\n&quot;</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>特别需要注意的是：<code>common-dependencies</code>作为容器模块，基础项目依赖我已经在根目录中定义过了，所以并未定义对应的脚本或是函数，所以<code>common-dependencies.gradle</code>中是空的。 这样做的原因是，如果是一些构建任务脚本，我在根目录下新建了一个 gradle 文件夹，里面放置了很多我需要执行的<code>xxx.gradle</code>构建任务脚本，这是为了脚本的统一管理，这样做对代码复用和脚本管理是很有帮助的。例外，项目模块的基础依赖的定义，一个根目录下的<code>build.gradle</code>已经够用了,没有必要在每个容器模块中定义子模块的依赖了。要不然，<code>common-dependencies</code>的配置就显得很多余了。而且我的初衷就是通过<code>common-dependencies</code>下定义不同类型项目需要的项目依赖。</p><p>然后在根目录的<code>build.gradle</code>文件中定义一些基础构建规则和模块依赖</p><h3 id="基础模块的使用" tabindex="-1"><a class="header-anchor" href="#基础模块的使用" aria-hidden="true">#</a> 基础模块的使用</h3><blockquote><p>前文说了配置了基础依赖的模块和含有测试模板的模块，那么，如何引入并使用它们呢？</p></blockquote><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>spring-security-resources.gradle\nbuildscript {\n    repositories {\n        maven { url = &quot;https://plugins.gradle.org/m2/&quot; }\n        maven { url = &quot;http://maven.aliyun.com/nexus/content/groups/public/&quot; }\n        jcenter()\n    }\n    dependencies {\n        classpath libs[&quot;spring-boot-gradle-plugin&quot;]\n    }\n}\n\napply plugin: &quot;io.spring.dependency-management&quot;\napply plugin: &quot;org.springframework.boot&quot;\n\nbootJar {\n    baseName = &#39;spring-security-resources&#39;\n    version =  &#39;1.0.0&#39;\n}\n\ndependencies {\n    compile project(&#39;:common-dependencies:common-template&#39;)\n    implementation &#39;org.springframework.boot:spring-boot-starter-web&#39;\n    testImplementation &#39;org.springframework.boot:spring-boot-starter-test&#39;\n}\n\n\n\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>此处是个 boot 项目，启动类配置下，因为我们引入了基础模块的依赖</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/*\n * @ProjectName: 编程学习\n * @Copyright:   2019 HangZhou xiazhaoyang Dev, Ltd. All Right Reserved.\n * @address:     http://xiazhaoyang.tech\n * @date:        2019/5/13 22:59\n * @email:       xiazhaoyang@live.com\n * @description: 本内容仅限于编程技术学习使用，转发请注明出处.\n */</span>\n<span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>res</span><span class="token punctuation">;</span>\n\n<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span></span><span class="token class-name">SpringApplication</span></span><span class="token punctuation">;</span>\n<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span></span><span class="token class-name">SpringBootApplication</span></span><span class="token punctuation">;</span>\n<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">ComponentScan</span></span><span class="token punctuation">;</span>\n\n<span class="token doc-comment comment">/**\n * <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>\n *\n * <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>\n *\n * <span class="token keyword">@author</span> xiazhaoyang\n * <span class="token keyword">@version</span> v1.0.0\n * <span class="token keyword">@date</span> 2019/5/13 22:59\n * <span class="token keyword">@modificationHistory</span>=========================逻辑或功能性重大变更记录\n * <span class="token keyword">@modify</span> By: <span class="token punctuation">{</span>修改人<span class="token punctuation">}</span> 2019/5/13\n * <span class="token keyword">@modify</span> reason: <span class="token punctuation">{</span>方法名<span class="token punctuation">}</span>:<span class="token punctuation">{</span>原因<span class="token punctuation">}</span>\n * ...\n */</span>\n<span class="token annotation punctuation">@SpringBootApplication</span>\n<span class="token annotation punctuation">@ComponentScan</span><span class="token punctuation">(</span>basePackages <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">&quot;com.example&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>\n<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpringSecurityResourceApp</span> <span class="token punctuation">{</span>\n    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">SpringSecurityResourceApp</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n\nserver<span class="token operator">:</span>\n  port<span class="token operator">:</span> <span class="token number">8080</span>\n  servlet<span class="token operator">:</span>\n    context<span class="token operator">-</span>path<span class="token operator">:</span> <span class="token operator">/</span>spring<span class="token operator">-</span>security<span class="token operator">-</span>resources\n\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>以 jar 方式启动后，请求<code>http://localhost:8080/spring-security-resources/template/hello</code></p><p><img src="https://s7.51cto.com/images/blog/202106/09/1cc3215614ec4d8963dd8e27d44cff55.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_30,g_se,x_10,y_10,shadow_20,type_ZmFuZ3poZW5naGVpdGk=" alt="[Gradle] Gradle 聚合模块配置_Gradle_02" loading="lazy"></p><p>如此一来，对于项目模块中常用的一些测试模块和工具类，我们就可以很轻松的管理起来了，每次搭建项目也不用重复写一次啦。。。。相较于<code>Maven</code>的方式，个人感觉是简化了很多很多，尤其是脚本函数的定义，可以使用 java 的语法轻松应对，上手很简单。</p><blockquote><p>最后分享下我的 gradle 文件夹（脚本管理）中项目树的打印脚本</p></blockquote><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token doc-comment comment">/**\n * 自动根据层级深度生成占位符\n * <span class="token keyword">@param</span> <span class="token parameter">level</span>\n * <span class="token keyword">@return</span>\n */</span>\n<span class="token keyword">static</span> def <span class="token function">generatorTreeNodePrefix</span><span class="token punctuation">(</span><span class="token keyword">int</span> level<span class="token punctuation">,</span> <span class="token class-name">String</span> startStr<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    def s <span class="token operator">=</span> <span class="token char">&#39;|   &#39;</span>\n    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> level<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        s <span class="token operator">+=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">0</span> <span class="token operator">==</span> i<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> level <span class="token operator">!=</span> <span class="token number">1</span> <span class="token operator">?</span> startStr <span class="token operator">:</span> <span class="token char">&#39;--&#39;</span><span class="token punctuation">)</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">return</span> s<span class="token operator">+</span><span class="token char">&#39; &#39;</span>\n<span class="token punctuation">}</span>\n<span class="token doc-comment comment">/**\n * 打印工程目录树\n * <span class="token keyword">@param</span> <span class="token parameter">dirs</span>\n * <span class="token keyword">@return</span>\n */</span>\ndef <span class="token function">printProjectTree</span><span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Project</span><span class="token punctuation">&gt;</span></span> dirs<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">if</span> <span class="token punctuation">(</span>dirs<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        def len <span class="token operator">=</span> dirs<span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n        def index <span class="token operator">=</span> <span class="token number">0</span>\n        dirs<span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>each <span class="token punctuation">{</span> e <span class="token operator">-&gt;</span>\n            def startStr <span class="token operator">=</span> <span class="token punctuation">(</span>index<span class="token operator">++</span> <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">==</span> len<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token char">&#39;\\\\--&#39;</span> <span class="token operator">:</span> <span class="token char">&#39;+--&#39;</span>\n            println <span class="token function">generatorTreeNodePrefix</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>depth<span class="token punctuation">,</span> startStr<span class="token punctuation">)</span> <span class="token operator">+</span> e<span class="token punctuation">.</span>name\n            <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>childProjects<span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n                <span class="token function">printProjectTree</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>childProjects<span class="token punctuation">)</span>\n            <span class="token punctuation">}</span>\n        <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\ntask printTree <span class="token operator">&lt;&lt;</span> <span class="token punctuation">{</span>\n    println <span class="token char">&#39;+--- &#39;</span> <span class="token operator">+</span> rootProject<span class="token punctuation">.</span>name\n    <span class="token function">printProjectTree</span><span class="token punctuation">(</span>rootProject<span class="token punctuation">.</span>childProjects<span class="token punctuation">)</span>\n<span class="token punctuation">}</span>\n\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Tips<code>: 引入任务脚本的方式在文章开头的根目录配置文件中哦！ </code></p><p>apply from: &quot;${gradleScriptDir}/task.gradle&quot;</p><h2 id="refrences" tabindex="-1"><a class="header-anchor" href="#refrences" aria-hidden="true">#</a> REFRENCES</h2>',53),l={href:"https://yq.aliyun.com/articles/348530",target:"_blank",rel:"noopener noreferrer"},r=(0,e.Uk)(" Gradle（入门）- 云栖社区"),u={href:"https://blog.csdn.net/woxueliuyun/article/details/54603184",target:"_blank",rel:"noopener noreferrer"},d=(0,e.Uk)(" Gradle 项目树 - CSDN"),k={href:"https://codeday.me/bug/20190105/504641.html",target:"_blank",rel:"noopener noreferrer"},v=(0,e.Uk)(" java – 具有共享依赖项的多模块项目的 Gradle 配置"),m={href:"https://www.jianshu.com/p/e17cece5f80c",target:"_blank",rel:"noopener noreferrer"},b=(0,e.Uk)(" 你真的了解 Gradle 吗？"),g={href:"https://www.cnblogs.com/skzncer99/p/5315631.html",target:"_blank",rel:"noopener noreferrer"},q=(0,e.Uk)(" Gradle 初探（一）：创建一个 Gradle 项目"),y={href:"https://www.cnblogs.com/davenkin/p/gradle-learning-8.html",target:"_blank",rel:"noopener noreferrer"},h=(0,e.Uk)(" Gradle 学习系列之八——构建多个 Project - 无知者云"),f={},j=(0,a(13860).Z)(f,[["render",function(n,s){const a=(0,e.up)("ExternalLinkIcon");return(0,e.wg)(),(0,e.iD)("div",null,[t,(0,e._)("p",null,[(0,e._)("a",o,[p,(0,e.Wm)(a)]),i]),c,(0,e._)("ul",null,[(0,e._)("li",null,[(0,e._)("a",l,[r,(0,e.Wm)(a)])]),(0,e._)("li",null,[(0,e._)("a",u,[d,(0,e.Wm)(a)])]),(0,e._)("li",null,[(0,e._)("a",k,[v,(0,e.Wm)(a)])]),(0,e._)("li",null,[(0,e._)("a",m,[b,(0,e.Wm)(a)])]),(0,e._)("li",null,[(0,e._)("a",g,[q,(0,e.Wm)(a)])]),(0,e._)("li",null,[(0,e._)("a",y,[h,(0,e.Wm)(a)])])])])}]])},13860:(n,s)=>{s.Z=(n,s)=>{const a=n.__vccOpts||n;for(const[n,e]of s)a[n]=e;return a}}}]);